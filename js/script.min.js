const baseURL="/";async function fetchImagesData(){const e=await fetch("/json/list.json");return await e.json()}function getRandomImage(e){const t=Object.keys(e.images),a=t[Math.floor(Math.random()*t.length)],n=e.images[a];return n[Math.floor(Math.random()*n.length)]}function createImageElement(e){const t=document.createElement("img");return t.src=e,t.className="banner-image",t}function positionWatermark(){const e=document.querySelector(".banner-image"),t=document.querySelector(".watermark");if(e&&t){const a=e.getBoundingClientRect();t.style.top=a.bottom+window.scrollY-t.offsetHeight+"px",t.style.left=a.right+window.scrollX-t.offsetWidth+"px"}}async function displayBanner(){const e=document.getElementById("bannerContainer"),t=getRandomImage(await fetchImagesData()),a=createImageElement(`/img/${t.type}/${t.src.split("/").pop()}`);"gif"===t.type&&t.repeat&&(a.dataset.startTime=Date.now(),a.dataset.repeat=t.repeat),e.appendChild(a),a.onload=positionWatermark}let bannerTimer;async function updateBanner(){const e=document.getElementById("bannerContainer"),t=document.querySelector(".banner-image");if(t){if(t.src.endsWith(".gif")&&t.dataset.startTime&&t.dataset.repeat){if(Date.now()-parseInt(t.dataset.startTime)<3e3*parseInt(t.dataset.repeat))return void(bannerTimer=setTimeout(updateBanner,1e3))}e.removeChild(t)}const a=getRandomImage(await fetchImagesData()),n=createImageElement(`/img/${a.type}/${a.src.split("/").pop()}`);"gif"===a.type&&a.repeat&&(n.dataset.startTime=Date.now(),n.dataset.repeat=a.repeat),e.appendChild(n),n.onload=positionWatermark,bannerTimer=setTimeout(updateBanner,"gif"===a.type?3e3*parseInt(a.repeat):7500)}displayBanner(),setTimeout(updateBanner,6750),window.addEventListener("unload",(()=>{bannerTimer&&clearTimeout(bannerTimer)})),window.addEventListener("resize",positionWatermark);